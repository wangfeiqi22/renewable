# 智慧垃圾清运系统需求规格说明书 v4.1

## 1. 引言

### 1.1 项目背景
随着城市化进程的加快，垃圾清运面临着效率低、监管难、协同差等挑战。本系统旨在构建一套智慧化的垃圾清运管理平台，连接个体户、物业、装修工程队、街道办、清运站及VIP客户，实现清运全流程的数字化、智能化和规范化。

### 1.2 文档目的
本文档基于《智慧垃圾清运系统规划方案v4.0》的第一版需求，结合最新的业务理解，梳理并明确了系统的核心功能与用户场景，作为系统开发和测试的依据。

## 2. 用户角色定义

系统共包含七类核心用户，各类用户职责如下：

1.  **个体户**：产生生活垃圾或少量商业垃圾的小微商户/个人，需求侧重于便捷投放和即时清运。
2.  **物业**：负责小区或园区环境管理的单位，需求侧重于辖区垃圾状态监控和协同调度。
3.  **装修工程队**：产生建筑装修垃圾的施工方，需求侧重于大方量垃圾的合规预约与清运。
4.  **街道办**：政府监管部门，需求侧重于全域数据监控、违规预警和考核评价。
5.  **清运站**：垃圾中转与处理站点，需求侧重于车辆调度、计量称重和转运管理。
6.  **车队**：拥有运输车辆和司机的运营主体，需求侧重于司机管理、订单分发与运力统计。
7.  **司机**：执行清运任务的人员，分为“车队司机”和“个人司机”两类。
8.  **VIP客户**：产生量大且稳定的大型企业或机构，需求侧重于定制化服务和周期结算。

## 3. 功能需求详情

### 3.1 个体户端
面向小微商户和个人用户的移动端入口（小程序/App）。

*   **创建清运单（智能下单）**：
    *   **GPS定位**：点击创建后，自动获取手机GPS定位，并在地图上显示，用户可微调选择准确位置。
    *   **地址填写**：基于定位自动解析地址，用户补充门牌号等具体信息。
    *   **AI拍照识别**：用户拍摄垃圾照片上传，系统调用AI视觉算法自动识别垃圾类型（如厨余、可回收、大件垃圾等）。
    *   **智能描述与估重**：系统根据识别结果，自动生成垃圾描述文本（如“废旧沙发一套”、“装修废料约5袋”）并自动预估重量/方量填入对应字段，用户可进行修改确认。
    *   **提交需求**：用户确认信息无误后提交订单。

### 3.2 物业端
面向小区/园区物业管理人员的管理工具。

*   **多小区管理**：查看并管理名下所有小区的清运单和历史清运记录。
*   **推广与获客**：
    *   **专属推广码**：生成带有物业标识的专属二维码，可分享给装修公司或业主。
    *   **佣金管理**：通过专属码创建的清运单，物业可获得平台抽佣，系统提供佣金统计与提现功能。

### 3.3 装修工程队端
面向建筑装修垃圾产生的施工方。

*   **创建工程清运单**：
    *   **项目地址管理**：针对装修项目创建独立的清运地址。
    *   **扫码绑定物业**：支持扫描物业提供的专属二维码创建订单。扫码后，该清运单自动绑定对应物业信息，作为后续统计汇总及物业抽佣的依据。
    *   **下单模式**：
        *   **指定指派**：可直接指定合作的车队和清运站进行清运。
        *   **公开发布**：类似个体户模式，将需求发布到平台，由系统匹配清运站及车队抢单。

### 3.4 街道办端（监管驾驶舱）
面向政府监管部门的大数据可视化大屏及移动端管理入口（小程序）。

*   **街道清运管理**：
    *   **辖区数据查看**：查看街道范围内所有的垃圾清运单及历史清运记录。
    *   **范围界定**：创建清运单或查看数据时，地址选择严格遵循行政区划（省/市/县区/街道）固化选择模式，再填写详细地址，确保数据归属准确。
*   **创建街道清运单**：
    *   **需求发布**：支持街道办自行发起清运需求（如公共区域清理）。
    *   **下单模式**：
        *   **指定指派**：指定长期合作的车队或清运站。
        *   **公开发布**：类似个体户模式，发布到平台由社会力量抢单。

### 3.5 清运站端（作业端）
面向中转站或处理中心的操作人员。

*   **站点配置**：
    *   **基础信息配置**：设置清运站的具体地理位置（经纬度/地图选点）。
    *   **业务规则配置**：自定义接收的垃圾分类类型（如仅收建筑垃圾、仅收厨余垃圾等）以及对应的处理费用标准。
*   **智能接单**：
    *   **自动匹配**：系统根据用户提交的垃圾分类和距离，自动将订单推送给最近的符合条件的清运站。
    *   **超时流转**：清运站需在5分钟内接单，若超时未接，系统自动将订单推送到附近其他清运站，直至有人接单。
    *   **抢单池发布**：清运站接单后，订单自动发布至“抢单池”，供所有关联车队/司机进行抢单。
*   **再生资源商城**：
    *   **成品发布**：将处理后的再生资源（如再生骨料、金属压块、塑料颗粒等）作为商品发布到线上商城，设置价格、库存及规格描述。
    *   **出入库管理**：管理再生资源的生产入库与销售出库，实时更新库存状态。

### 3.6 VIP客户端
面向大型企业、连锁餐饮等大客户。

*   **合同管理**：查看长期服务合同详情，包括服务标准、单价、周期等。
*   **周期清运**：设定固定的清运计划（如每日定时），无需每次单独预约。
*   **月结对账**：生成月度清运详单和财务对账单，支持企业对公转账记录上传。
*   **专属客服**：一键联系专属客户经理，享受优先调度服务。
*   **定制报表**：导出符合企业ESG要求的废弃物处理及减碳报告。

### 3.7 车队端
面向拥有运输车辆和司机的运营管理方（小程序/PC端）。

*   **运力管理**：
    *   **司机管理**：添加、审核和管理车队下属司机信息。
    *   **车辆管理**：管理车辆档案、保险、年检及维修记录。
*   **订单管理**：
    *   **公海抢单**：车队管理员可在“抢单池”中批量查看并抢单，抢单后指派给车队内司机。
    *   **内部派单**：将抢到的订单或线下承接的订单，指派给指定的空闲司机。
    *   **自主下单**：车队可将线下承接的业务录入系统，创建清运单，并直接指定内部司机和合作的清运站进行履约。
*   **数据统计**：
    *   **接单统计**：按日/周/月统计车队的接单量、完单率。
    *   **收入报表**：查看车队整体及单车的营收情况。

### 3.8 司机端
面向执行清运任务的司机（移动端App）。

*   **注册与认证**：
    *   **身份选择**：注册时支持选择“车队司机”或“个人司机”。
    *   **信息录入**：上传个人照片、身份证、驾驶证、手机号及车辆信息（车辆类型、载重、车辆照片、车牌等）。
    *   **车队关联**：车队司机需选择或输入关联车队码；个人司机直接注册，无车队归属。

*   **抢单与接单**：
    *   **公海抢单**：
        *   车队司机：经车队授权后，可在公海池抢单。
        *   个人司机：**不可**参与公海抢单。
    *   **接收派单**：车队司机可接收所属车队管理员指派的任务。

*   **自建单据（个人司机专属）**：
    *   **场景描述**：针对个人司机自行承接的线下业务，无需生成电子联单的场景。
    *   **创建流程**：填写垃圾类型、方量、位置及目的地清运站。
    *   **审核确认**：提交后需经平台或清运站审核确认。
    *   **无联单模式**：该类订单执行过程中不调用城管接口，不生成电子联单。

*   **消息提醒**：
    *   **业务通知**：接收街道办发布的通知公告。
    *   **预警消息**：接收清运站的满溢、停运或拒收特定垃圾的预警信息。
    *   **营销推广**：接收清运站的促销活动或奖励政策推送。

*   **任务执行**：
    *   **前往装车**：抢单成功后，导航至垃圾产生点。
    *   **装车上报**：
        *   **单车/多车逻辑**：系统支持单次清运和多车次往返清运。
        *   **装车拍照**：根据实际装载情况拍摄装车照片。
        *   **电子联单申报**：
            *   标准订单：点击“推送清运站”，系统自动调用城管系统接口上报数据，生成并返回电子联单。
            *   没有关联车队司机的自建订单：跳过此步骤。
        *   **直运/往返**：若为单车任务，直接前往清运站；若为多车任务，卸车后系统指引返回产生点继续装运，记录每一车次的详细信息。
    *   **轨迹记录**：App后台实时记录车辆行驶轨迹，并在地图上展示，确保运输路线合规。
*   **卸车确认**：
    *   **进站拍照**：到达清运站后，拍摄车辆进站照片。
    *   **卸车拍照**：卸货完成后，拍摄空车/卸货完成照片。
    *   **任务完成**：确认卸车无误后，点击完成本车次任务。

## 4. 系统支撑模块

### 4.1 用户中心
*   用户注册/登录（手机号、微信授权）。
*   实名认证与企业资质审核。
*   角色权限管理（RBAC）。

### 4.2 消息中心
*   系统通知、工单状态变更通知、预警消息推送。

### 4.3 软件接入平台
*   微信小程序，城管平台。

## 5. 非功能需求

*   **稳定性**：系统需支持7*24小时不间断运行，关键数据具备备份恢复机制。
*   **安全性**：用户数据加密存储，传输过程采用HTTPS协议，具备防攻击能力。
*   **易用性**：界面简洁直观，操作流程符合各类用户习惯，特别是移动端需考虑户外操作场景。
*   **扩展性**：系统架构需支持未来接入更多类型的智能设备和第三方监管平台。
